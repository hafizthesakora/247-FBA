(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3532],{71250:function(e,t,r){Promise.resolve().then(r.bind(r,84056))},68755:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var s=r(2265);let a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),l=e=>{let t=o(e);return t.charAt(0).toUpperCase()+t.slice(1)};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},c=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:m,...f}=e;return(0,s.createElement)("svg",{ref:t,...d,width:n,height:n,stroke:r,strokeWidth:l?24*Number(o)/Number(n):o,className:a("lucide",c),...!u&&!i(f)&&{"aria-hidden":"true"},...f},[...m.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,s.forwardRef)((r,o)=>{let{className:d,...i}=r;return(0,s.createElement)(c,{ref:o,iconNode:t,className:a("lucide-".concat(n(l(e))),"lucide-".concat(e),d),...i})});return r.displayName=l(e),r}},30401:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(68755).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},51817:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(68755).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},84056:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var s=r(57437),a=r(27526),n=r(2265),o=r(51817),l=r(30401);function d(){var e;let{data:t,update:r}=(0,a.kP)(),[d,i]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),[m,f]=(0,n.useState)(!1),[x,b]=(0,n.useState)(""),[h,p]=(0,n.useState)(!1),[g,w]=(0,n.useState)({name:"",company:"",phone:""}),[y,v]=(0,n.useState)({currentPassword:"",newPassword:"",confirmPassword:""});async function j(e){e.preventDefault(),i(!0),u(!1);try{(await fetch("/api/portal/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).ok&&(u(!0),await r(),setTimeout(()=>u(!1),3e3))}catch(e){}i(!1)}async function N(e){if(e.preventDefault(),b(""),p(!1),y.newPassword!==y.confirmPassword){b("Passwords do not match");return}if(y.newPassword.length<8){b("Password must be at least 8 characters");return}f(!0);try{let e=await fetch("/api/portal/settings/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:y.currentPassword,newPassword:y.newPassword})});if(e.ok)p(!0),v({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>p(!1),3e3);else{let t=await e.json();b(t.error||"Failed to update password")}}catch(e){b("Something went wrong")}f(!1)}return(0,n.useEffect)(()=>{fetch("/api/portal/settings").then(e=>e.json()).then(e=>{e.user&&w({name:e.user.name||"",company:e.user.company||"",phone:e.user.phone||""})}).catch(()=>{})},[]),(0,s.jsxs)("div",{className:"max-w-2xl",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"font-heading text-2xl font-bold text-navy-900",children:"Settings"}),(0,s.jsx)("p",{className:"text-text-secondary text-sm mt-1",children:"Manage your account settings"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-surface-border p-6 mb-6",children:[(0,s.jsx)("h2",{className:"font-heading text-base font-semibold text-navy-900 mb-4",children:"Profile Information"}),(0,s.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-navy-900 mb-1.5",children:"Email"}),(0,s.jsx)("input",{type:"email",value:(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.email)||"",disabled:!0,className:"w-full px-4 py-2.5 rounded-lg border border-surface-border text-text-secondary bg-surface-offwhite text-sm cursor-not-allowed"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-navy-900 mb-1.5",children:"Full Name"}),(0,s.jsx)("input",{type:"text",value:g.name,onChange:e=>w({...g,name:e.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-surface-border text-navy-900 text-sm focus:outline-none focus:ring-2 focus:ring-orange/20 focus:border-orange"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-navy-900 mb-1.5",children:"Company"}),(0,s.jsx)("input",{type:"text",value:g.company,onChange:e=>w({...g,company:e.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-surface-border text-navy-900 text-sm focus:outline-none focus:ring-2 focus:ring-orange/20 focus:border-orange"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-navy-900 mb-1.5",children:"Phone"}),(0,s.jsx)("input",{type:"tel",value:g.phone,onChange:e=>w({...g,phone:e.target.value}),className:"w-full px-4 py-2.5 rounded-lg border border-surface-border text-navy-900 text-sm focus:outline-none focus:ring-2 focus:ring-orange/20 focus:border-orange"})]}),(0,s.jsxs)("button",{type:"submit",disabled:d,className:"px-5 py-2.5 rounded-lg bg-orange text-white text-sm font-semibold hover:bg-orange-600 transition-colors disabled:opacity-50 flex items-center gap-2",children:[d?(0,s.jsx)(o.Z,{className:"h-4 w-4 animate-spin"}):c?(0,s.jsx)(l.Z,{className:"h-4 w-4"}):null,c?"Saved":"Save Changes"]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-surface-border p-6",children:[(0,s.jsx)("h2",{className:"font-heading text-base font-semibold text-navy-900 mb-4",children:"Change Password"}),x&&(0,s.jsx)("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:x}),(0,s.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-navy-900 mb-1.5",children:"Current Password"}),(0,s.jsx)("input",{type:"password",value:y.currentPassword,onChange:e=>v({...y,currentPassword:e.target.value}),required:!0,className:"w-full px-4 py-2.5 rounded-lg border border-surface-border text-navy-900 text-sm focus:outline-none focus:ring-2 focus:ring-orange/20 focus:border-orange"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-navy-900 mb-1.5",children:"New Password"}),(0,s.jsx)("input",{type:"password",value:y.newPassword,onChange:e=>v({...y,newPassword:e.target.value}),required:!0,minLength:8,className:"w-full px-4 py-2.5 rounded-lg border border-surface-border text-navy-900 text-sm focus:outline-none focus:ring-2 focus:ring-orange/20 focus:border-orange"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-navy-900 mb-1.5",children:"Confirm New Password"}),(0,s.jsx)("input",{type:"password",value:y.confirmPassword,onChange:e=>v({...y,confirmPassword:e.target.value}),required:!0,className:"w-full px-4 py-2.5 rounded-lg border border-surface-border text-navy-900 text-sm focus:outline-none focus:ring-2 focus:ring-orange/20 focus:border-orange"})]}),(0,s.jsxs)("button",{type:"submit",disabled:m,className:"px-5 py-2.5 rounded-lg bg-navy-900 text-white text-sm font-semibold hover:bg-navy-800 transition-colors disabled:opacity-50 flex items-center gap-2",children:[m?(0,s.jsx)(o.Z,{className:"h-4 w-4 animate-spin"}):h?(0,s.jsx)(l.Z,{className:"h-4 w-4"}):null,h?"Updated":"Update Password"]})]})]})]})}}},function(e){e.O(0,[7526,2971,2117,1744],function(){return e(e.s=71250)}),_N_E=e.O()}]);
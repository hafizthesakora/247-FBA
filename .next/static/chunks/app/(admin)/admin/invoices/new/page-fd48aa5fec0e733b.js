(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6114],{18770:function(e,t,r){Promise.resolve().then(r.bind(r,3170))},68755:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(2265);let a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)};var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},l=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:m,...f}=e;return(0,n.createElement)("svg",{ref:t,...u,width:o,height:o,stroke:r,strokeWidth:i?24*Number(s)/Number(o):s,className:a("lucide",l),...!c&&!d(f)&&{"aria-hidden":"true"},...f},[...m.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),c=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{className:u,...d}=r;return(0,n.createElement)(l,{ref:s,iconNode:t,className:a("lucide-".concat(o(i(e))),"lucide-".concat(e),u),...d})});return r.displayName=i(e),r}},32660:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},51817:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(68755).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},27648:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(72972),a=r.n(n)},99376:function(e,t,r){"use strict";var n=r(35475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},3170:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(57437),a=r(2265),o=r(99376),s=r(27648),i=r(32660),u=r(51817);function d(){let e=(0,o.useRouter)(),[t,r]=(0,a.useState)([]),[d,l]=(0,a.useState)(!1),[c,m]=(0,a.useState)(""),[f,h]=(0,a.useState)({orderId:"",amount:"",dueDate:""});async function x(t){t.preventDefault(),m(""),l(!0);try{let t=await fetch("/api/admin/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:f.orderId,amount:parseFloat(f.amount),dueDate:f.dueDate})});if(!t.ok){let e=await t.json();m(e.error||"Failed to create invoice"),l(!1);return}e.push("/admin/invoices")}catch(e){m("Something went wrong"),l(!1)}}return(0,a.useEffect)(()=>{fetch("/api/admin/orders?uninvoiced=true").then(e=>e.json()).then(e=>r(e.orders||[])).catch(()=>{})},[]),(0,n.jsxs)("div",{className:"max-w-lg",children:[(0,n.jsxs)(s.default,{href:"/admin/invoices",className:"inline-flex items-center gap-1 text-sm text-text-secondary hover:text-navy-900 mb-4 transition-colors",children:[(0,n.jsx)(i.Z,{className:"h-4 w-4"}),"Back to Invoices"]}),(0,n.jsx)("h1",{className:"font-heading text-2xl font-bold text-navy-900 mb-6",children:"Create Invoice"}),c&&(0,n.jsx)("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:c}),(0,n.jsxs)("form",{onSubmit:x,className:"bg-white rounded-xl border border-surface-border p-6 space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-navy-900 mb-1.5",children:"Order"}),(0,n.jsxs)("select",{value:f.orderId,onChange:e=>(function(e){let r=t.find(t=>t.id===e);h({orderId:e,amount:r?r.totalAmount.toString():"",dueDate:f.dueDate})})(e.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg border border-surface-border text-navy-900 text-sm focus:outline-none focus:ring-2 focus:ring-orange/20 focus:border-orange",children:[(0,n.jsx)("option",{value:"",children:"Select an order..."}),t.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.shipment.trackingNumber," — ",e.user.company||e.user.name||"Client"," (€",e.totalAmount.toFixed(2),")"]},e.id))]}),0===t.length&&(0,n.jsx)("p",{className:"text-xs text-text-secondary mt-1",children:"No uninvoiced orders available"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-navy-900 mb-1.5",children:"Amount (€)"}),(0,n.jsx)("input",{type:"number",step:"0.01",min:"0",value:f.amount,onChange:e=>h({...f,amount:e.target.value}),required:!0,className:"w-full px-4 py-2.5 rounded-lg border border-surface-border text-navy-900 text-sm focus:outline-none focus:ring-2 focus:ring-orange/20 focus:border-orange"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-navy-900 mb-1.5",children:"Due Date"}),(0,n.jsx)("input",{type:"date",value:f.dueDate,onChange:e=>h({...f,dueDate:e.target.value}),required:!0,className:"w-full px-4 py-2.5 rounded-lg border border-surface-border text-navy-900 text-sm focus:outline-none focus:ring-2 focus:ring-orange/20 focus:border-orange"})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,n.jsx)(s.default,{href:"/admin/invoices",className:"px-5 py-2.5 rounded-lg border border-surface-border text-sm font-medium text-navy-900 hover:bg-surface-offwhite transition-colors",children:"Cancel"}),(0,n.jsxs)("button",{type:"submit",disabled:d,className:"px-5 py-2.5 rounded-lg bg-orange text-white text-sm font-semibold hover:bg-orange-600 transition-colors disabled:opacity-50 flex items-center gap-2",children:[d&&(0,n.jsx)(u.Z,{className:"h-4 w-4 animate-spin"}),"Create Invoice"]})]})]})]})}}},function(e){e.O(0,[2972,2971,2117,1744],function(){return e(e.s=18770)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7302],{38149:function(e,t,s){Promise.resolve().then(s.bind(s,63636))},42488:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(68755).Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},41671:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(68755).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},43044:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(68755).Z)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},91723:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(68755).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},83774:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(68755).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},44794:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(68755).Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},63636:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var n=s(57437),a=s(2265),r=s(91723),i=s(43044),l=s(41671),c=s(44794),d=s(36338),o=s(77782),x=s(42488);function u(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(!1),i=(0,a.useRef)(null);return(0,a.useEffect)(()=>((function e(){let s=new EventSource("/api/ops/activity-stream");i.current=s,s.onopen=()=>r(!0),s.onmessage=e=>{try{let s=JSON.parse(e.data);Array.isArray(s)&&t(e=>{let t=new Set(e.map(e=>e.id));return[...s.filter(e=>!t.has(e.id)),...e].slice(0,50)})}catch(e){}},s.onerror=()=>{r(!1),s.close(),setTimeout(e,5e3)}})(),()=>{var e;null===(e=i.current)||void 0===e||e.close()}),[]),(0,n.jsxs)("div",{className:"bg-white rounded-xl border border-surface-border",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-surface-border",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(x.Z,{className:"h-4 w-4 text-navy-900"}),(0,n.jsx)("h3",{className:"font-medium text-navy-900 text-sm",children:"Live Activity"})]}),(0,n.jsx)("span",{className:"h-2 w-2 rounded-full ".concat(s?"bg-green-500":"bg-red-500")})]}),(0,n.jsx)("div",{className:"max-h-80 overflow-y-auto divide-y divide-surface-border",children:0===e.length?(0,n.jsx)("div",{className:"px-4 py-8 text-center text-text-secondary text-sm",children:"No recent activity"}):e.map(e=>{var t;return(0,n.jsxs)("div",{className:"px-4 py-3",children:[(0,n.jsxs)("p",{className:"text-sm text-navy-900",children:[(0,n.jsx)("span",{className:"font-medium",children:(null===(t=e.user)||void 0===t?void 0:t.name)||"System"})," ",e.action]}),(0,n.jsxs)("p",{className:"text-xs text-text-secondary mt-0.5",children:[e.entityType,e.entityId?" \xb7 ".concat(e.entityId.slice(-6)):""," \xb7"," ",new Date(e.createdAt).toLocaleTimeString()]})]},e.id)})})]})}function m(){var e,t,s,x;let[m,h]=(0,a.useState)(null),[g,p]=(0,a.useState)(!0),[f,b]=(0,a.useState)(null);async function y(e,t){b(e);try{await fetch("/api/ops/tasks/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:{claim:"IN_PROGRESS",complete:"COMPLETED"}[t]})});let s=await fetch("/api/ops/dashboard"),n=await s.json();h(n)}finally{b(null)}}return((0,a.useEffect)(()=>{fetch("/api/ops/dashboard").then(e=>e.json()).then(e=>{h(e),p(!1)}).catch(()=>p(!1))},[]),g)?(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-orange border-t-transparent rounded-full"})}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h1",{className:"font-heading text-2xl font-bold text-navy-900",children:"Operations Dashboard"}),(0,n.jsx)("p",{className:"text-text-secondary text-sm mt-1",children:"Your tasks and warehouse activity"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,n.jsx)(d.R,{title:"Pending Tasks",value:null!==(e=null==m?void 0:m.stats.pendingTasks)&&void 0!==e?e:0,icon:r.Z}),(0,n.jsx)(d.R,{title:"In Progress",value:null!==(t=null==m?void 0:m.stats.inProgressTasks)&&void 0!==t?t:0,icon:i.Z}),(0,n.jsx)(d.R,{title:"Completed Today",value:null!==(s=null==m?void 0:m.stats.completedToday)&&void 0!==s?s:0,icon:l.Z}),(0,n.jsx)(d.R,{title:"Shipments at Station",value:null!==(x=null==m?void 0:m.stats.shipmentsAtStation)&&void 0!==x?x:0,icon:c.Z})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"font-heading text-lg font-semibold text-navy-900 mb-3",children:"Active Tasks"}),(0,n.jsx)("div",{className:"space-y-3",children:(null==m?void 0:m.activeTasks)&&m.activeTasks.length>0?m.activeTasks.map(e=>(0,n.jsx)(o.s,{task:e,onAction:y,loading:f===e.id},e.id)):(0,n.jsx)("div",{className:"bg-white rounded-xl border border-surface-border p-8 text-center text-text-secondary text-sm",children:"No active tasks"})})]}),(0,n.jsx)(u,{})]})]})}},77782:function(e,t,s){"use strict";s.d(t,{s:function(){return c}});var n=s(57437),a=s(44794),r=s(83774),i=s(91723),l=s(48859);function c(e){let{task:t,onAction:s,loading:c}=e;return(0,n.jsx)("div",{className:"bg-white rounded-xl border border-surface-border p-4 hover:shadow-sm transition-shadow",children:(0,n.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,n.jsx)("h3",{className:"font-medium text-navy-900 text-sm truncate",children:t.title}),(0,n.jsx)(l.O,{status:t.priority})]}),t.description&&(0,n.jsx)("p",{className:"text-xs text-text-secondary line-clamp-2 mb-2",children:t.description}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs text-text-secondary",children:[(0,n.jsx)(l.O,{status:t.status}),(0,n.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,n.jsx)(a.Z,{className:"h-3 w-3"}),t.type]}),t.shipment&&(0,n.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,n.jsx)(a.Z,{className:"h-3 w-3"}),t.shipment.trackingNumber]}),t.station&&(0,n.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,n.jsx)(r.Z,{className:"h-3 w-3"}),t.station.name]}),t.dueDate&&(0,n.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,n.jsx)(i.Z,{className:"h-3 w-3"}),new Date(t.dueDate).toLocaleDateString()]})]})]}),(()=>{switch(t.status){case"PENDING":return(0,n.jsx)("button",{onClick:()=>null==s?void 0:s(t.id,"claim"),disabled:c,className:"px-3 py-1.5 rounded-lg bg-orange text-white text-xs font-semibold hover:bg-orange-600 transition-colors disabled:opacity-50",children:"Claim"});case"IN_PROGRESS":return(0,n.jsx)("button",{onClick:()=>null==s?void 0:s(t.id,"complete"),disabled:c,className:"px-3 py-1.5 rounded-lg bg-green-600 text-white text-xs font-semibold hover:bg-green-700 transition-colors disabled:opacity-50",children:"Complete"});default:return null}})()]})})}},36338:function(e,t,s){"use strict";s.d(t,{R:function(){return r}});var n=s(57437),a=s(93448);function r(e){let{title:t,value:s,icon:r,trend:i,trendUp:l,className:c}=e;return(0,n.jsx)("div",{className:(0,a.cn)("bg-white rounded-xl border border-surface-border p-6",c),children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-text-secondary",children:t}),(0,n.jsx)("p",{className:"mt-1 text-2xl font-bold text-navy-900",children:s}),i&&(0,n.jsx)("p",{className:(0,a.cn)("mt-1 text-xs font-medium",l?"text-green-600":"text-red-500"),children:i})]}),(0,n.jsx)("div",{className:"h-10 w-10 rounded-lg bg-orange/10 flex items-center justify-center",children:(0,n.jsx)(r,{className:"h-5 w-5 text-orange"})})]})})}},48859:function(e,t,s){"use strict";s.d(t,{O:function(){return i}});var n=s(57437),a=s(93448);let r={DRAFT:"bg-gray-100 text-gray-700",RECEIVED:"bg-blue-100 text-blue-700",INSPECTING:"bg-yellow-100 text-yellow-700",PREPPING:"bg-purple-100 text-purple-700",QUALITY_CHECK:"bg-indigo-100 text-indigo-700",READY_TO_SHIP:"bg-cyan-100 text-cyan-700",SHIPPED:"bg-orange-100 text-orange-700",DELIVERED:"bg-green-100 text-green-700",PENDING:"bg-yellow-100 text-yellow-700",PROCESSING:"bg-blue-100 text-blue-700",COMPLETED:"bg-green-100 text-green-700",CANCELLED:"bg-red-100 text-red-700",SENT:"bg-blue-100 text-blue-700",PAID:"bg-green-100 text-green-700",OVERDUE:"bg-red-100 text-red-700",IN_PROGRESS:"bg-blue-100 text-blue-700",ACTIVE:"bg-green-100 text-green-700",INACTIVE:"bg-gray-100 text-gray-700",LOW:"bg-slate-100 text-slate-700",MEDIUM:"bg-yellow-100 text-yellow-700",HIGH:"bg-orange-100 text-orange-700",URGENT:"bg-red-100 text-red-700"};function i(e){let{status:t,className:s}=e;return(0,n.jsx)("span",{className:(0,a.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold capitalize",r[t]||"bg-gray-100 text-gray-700",s),children:t.replace(/_/g," ").toLowerCase()})}},93448:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var n=s(61994),a=s(53335);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,n.W)(t))}}},function(e){e.O(0,[8697,2971,2117,1744],function(){return e(e.s=38149)}),_N_E=e.O()}]);